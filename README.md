# Where to Go - Сервис для путешественников

![Здесь должна быть картинка](demo.png)

Сервис для отображения интересных мест на интерактивной карте с возможностью управления контентом через админ-панель.

Ссылка на сайт - [Сайт](http://yoyoynv.pythonanywhere.com/)\
Ссылка на админку сайта - [Админка](http://yoyoynv.pythonanywhere.com/admin/)

## Оглавление
- [Установка и запуск](#установка-и-запуск)
    - [Переменные окружения](#переменные-окружения)
- [Структура проекта](#структура-проекта)
    - [Папка `where_to_go`](#папка-where_to_go)
    - [Папка `places`](#папка-places)
    - [Папка `static`](#папка-static)
    - [Файлы в корневом каталоге](#файлы-в-корневом-каталоге)
- [Запуск сервера](#запуск-сервера)
- [Наполнение базы данных](#наполнение-базы-данных)
- [Цель проекта](#цель-проекта)

## Установка и запуск
- Python 3.12 должен быть установлен
- Скачайте код
- Рекомендуется создать виртуальное окружение. Для этого нужно выполнить команду: 
```bash
python -m venv .venv
```
- Затем нужно установить все необходимые библиотеки, сделать это можно командой: 
```bash
pip install -r requirements.txt
```
- Скрипт запускается из командной строки или терминала IDE. 
- Перед запуском убедитесь что вы находитесь в папке с файлом.
- Для перехода между папками используйте команду `cd`. 
- Для перехода между дисками необходимо указать имя диска. 
- Для запуска сервера используется команда: 

```bash
python manage.py runserver
```
- Так же при необходимости, нужно активировать виртуальное окружения этого проекта, 
сделать это можно с помощью команды 
```bash
.venv\Scripts\activate
```

Сайт будет доступен по адресу - http://127.0.0.1:8000/

### Переменные окружения
Создайте файл .env в корне проекта:
- `SECRET_KEY` - Секретный ключ Django, используемый для криптографической подписи данных. Должен быть уникальным и сложным для предсказания.
[Документация](https://docs.djangoproject.com/en/3.0/ref/settings/#secret-key)
- `ALLOWED_HOSTS` - Список допустимых доменов/хостов, которые может обслуживать Django. Это важная мера безопасности для защиты от атак через HTTP Host-заголовки, которые возможны даже при кажущихся безопасными настройках веб-сервера.
[Документация](https://docs.djangoproject.com/en/3.0/ref/settings/#allowed-hosts)
- `DEBUG` - Логический флаг (True/False), включающий или отключающий режим отладки. Если `DEBUG=True`, Django при ошибке покажет детальный traceback с метаданными окружения, включая все текущие настройки из `settings.py`.
[Документация](https://docs.djangoproject.com/en/3.0/ref/settings/#debug)

Пример .env-файла:
```python
SECRET_KEY=ваш_секретный_ключ # обязательлно для запуска сервера
DEBUG=True # В продакшне установите False
ALLOWED_HOSTS=localhost,127.0.0.1,ваш-домен.com # Разделяйте хосты запятыми, без пробелов
```

## Структура проекта

### Папка `where_to_go`
Ядро проекта с конфигурацией Django и скриптом для загрузки данных:
- `settings.py` — Настройки базы данных.
- `urls.py` — определяет маршруты (URL-адреса) проекта и связывает их с view-функциями.
- `views.py` — обработчики запросов (например, рендеринг страниц или API-эндпоинтов).
- `wsgi.py` — используется для развертывания на серверах (например, через Gunicorn или uWSGI).
- `asgi.py` — для асинхронных серверов (например, Daphne).

### Папка `places`
Приложение Django для работы с местами:
- `management/commands/load_place.py` Скрипт загрузки мест из JSON-файлов.
- `models.py` — модели данных (например, Place для хранения информации о местах)
- `admin.py` — регистрация моделей в админ-панели Django
- `migrations/` — миграции базы данных (создаются автоматически)
- `tests.py` — тесты функционала приложения
- `apps.py` — конфигурация приложения (обычно не требует редактирования)
- `templates/index.html` — основной шаблон для главной страницы
- `templates/reassign_place.html` — шаблон для страницы переноса изображений

### Папка `static`
Статические файлы проекта:
- `css/style.css` — стили.
- `js/leaflet-sidebar.js` — JavaScript-скрипты.
- `images/` — иконки.

### Файлы в корневом каталоге
- **.gitignore** — Этот файл содержит список файлов и каталогов, которые должны быть проигнорированы системой контроля версий Git. Обычно сюда добавляются временные файлы, сгенерированные IDE, а также файлы конфигурации и зависимости, которые не должны быть загружены в репозиторий.

- **manage.py** — Это основной скрипт для управления проектом Django. С его помощью вы можете запускать сервер разработки, выполнять миграции, создавать приложения и выполнять другие команды, связанные с управлением проектом.

- **requirements.txt** — Этот файл содержит список всех зависимостей вашего проекта, необходимых для его корректной работы.

## Запуск сервера
```bash
python manage.py migrate
python manage.py runserver
```

## Наполнение базы данных
1. Создайте суперпользователя:
```bash
python manage.py createsuperuser
```

2. Перейдите в админ-панель и добавьте:

- Места (обязательные поля: Название, Широта, Долгота).
- Изображения.

3. Или использовать скрипт, для это нужно выполнить команду:
```bash
python manage.py load_place http://адрес/файла.json
```

Образец JSON-файла с локациями:
```json
{
    "title": "Экскурсионная компания «Легенды Москвы»",
    "imgs": [
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/4f793576c79c1cbe68b73800ae06f06f.jpg",
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/7a7631bab8af3e340993a6fb1ded3e73.jpg",
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/a55cbc706d764c1764dfccf832d50541.jpg",
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/65153b5c595345713f812d1329457b54.jpg",
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/0a79676b3d5e3b394717b4bf2e610a57.jpg",
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/1e27f507cb72e76b604adbe5e7b5f315.jpg"
    ],
    "description_short": "Неважно, живёте ли вы в Москве всю жизнь или впервые оказались в столице, составить ёмкий, познавательный и впечатляющий маршрут по городу — творческая и непростая задача. И её с удовольствием берёт на себя экскурсионная компания «Легенды Москвы»!",
    "description_long": "<p>Экскурсия от компании «Легенды Москвы» — простой, удобный и приятный способ познакомиться с городом или освежить свои чувства к нему. Что выберете вы — классическую или необычную экскурсию, пешую прогулку или путешествие по городу на автобусе? Любые варианты можно скомбинировать в уникальный маршрут и создать собственную индивидуальную экскурсионную программу.</p><p>Компания «Легенды Москвы» сотрудничает с аккредитованными экскурсоводами и тщательно следит за качеством экскурсий и сервиса. Автобусные экскурсии проводятся на комфортабельном современном транспорте. Для вашего удобства вы можете заранее забронировать конкретное место в автобусе — это делает посадку организованной и понятной.</p><p>По любым вопросам вы можете круглосуточно обратиться по телефонам горячей линии.</p><p>Подробности узнавайте <a class=\"external-link\" href=\"https://moscowlegends.ru \" target=\"_blank\">на сайте</a>. За обновлениями удобно следить <a class=\"external-link\" href=\"https://vk.com/legends_of_moscow \" target=\"_blank\">«ВКонтакте»</a>, <a class=\"external-link\" href=\"https://www.facebook.com/legendsofmoscow?ref=bookmarks \" target=\"_blank\">в Facebook</a>.</p>",
    "coordinates": {
        "lng": "37.64912239999976",
        "lat": "55.77754550000014"
    }
}
```

## Цели проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).